<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>butterfly.solution API documentation</title>
    <meta name="description" content="Butterfly Solution." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 0.9em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    margin-left: 25%;
    max-width: 90%;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    position: fixed;
    height: 100%;
    width: 25%;
    float: left;
    padding: 30px;
    overflow: auto;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  }

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; }

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;

      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: auto;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  .desc {
    white-space: pre-wrap;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      position: inherit;
      float: none;
      width: auto;
    }
    #content {
      width: 95%;
      margin-left: auto;
      border-left: none;
      padding: 30px;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sa { color: #BA2121 } /* Literal.String.Affix */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .dl { color: #BA2121 } /* Literal.String.Delimiter */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .fm { color: #0000FF } /* Name.Function.Magic */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .vm { color: #19177C } /* Name.Variable.Magic */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#butterfly.solution.Solution">Solution</a></span>
        
          
  <ul>
    <li class="mono"><a href="#butterfly.solution.Solution.__init__">__init__</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.ToString">ToString</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.duplicate">duplicate</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.load_probe_values">load_probe_values</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.load_probes">load_probes</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.purge">purge</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.run">run</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.sample">sample</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.skipped_probes">skipped_probes</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.terminate">terminate</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.update_from_recipe">update_from_recipe</a></li>
    <li class="mono"><a href="#butterfly.solution.Solution.update_solution_params">update_solution_params</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#butterfly.solution.SolutionParameter">SolutionParameter</a></span>
        
          
  <ul>
    <li class="mono"><a href="#butterfly.solution.SolutionParameter.__init__">__init__</a></li>
    <li class="mono"><a href="#butterfly.solution.SolutionParameter.ToString">ToString</a></li>
    <li class="mono"><a href="#butterfly.solution.SolutionParameter.duplicate">duplicate</a></li>
    <li class="mono"><a href="#butterfly.solution.SolutionParameter.from_cpp_dictionary">from_cpp_dictionary</a></li>
    <li class="mono"><a href="#butterfly.solution.SolutionParameter.from_dictionary_file">from_dictionary_file</a></li>
    <li class="mono"><a href="#butterfly.solution.SolutionParameter.is_time_in_range">is_time_in_range</a></li>
  </ul>

        </li>
      </ul>
    </li>

    
    <li class="set"><h3>Module Index :: <a href="../butterfly/index.html">butterfly</a></h3>
    
    <ul>
      <li class="mono"><a href="../butterfly/RASProperties.m.html">RASProperties</a></li>
      

      <li class="mono"><a href="../butterfly/T.m.html">T</a></li>
      

      <li class="mono"><a href="../butterfly/U.m.html">U</a></li>
      

      <li class="mono"><a href="../butterfly/alphat.m.html">alphat</a></li>
      

      <li class="mono"><a href="../butterfly/blockMeshDict.m.html">blockMeshDict</a></li>
      

      <li class="mono"><a href="../butterfly/boundarycondition.m.html">boundarycondition</a></li>
      

      <li class="mono"><a href="../butterfly/case.m.html">case</a></li>
      

      <li class="mono"><a href="../butterfly/conditions.m.html">conditions</a></li>
      

      <li class="mono"><a href="../butterfly/controlDict.m.html">controlDict</a></li>
      

      <li class="mono"><a href="../butterfly/decomposeParDict.m.html">decomposeParDict</a></li>
      

      <li class="mono"><a href="../butterfly/epsilon.m.html">epsilon</a></li>
      

      <li class="mono"><a href="../butterfly/exception.m.html">exception</a></li>
      

      <li class="mono"><a href="../butterfly/fields.m.html">fields</a></li>
      

      <li class="mono"><a href="../butterfly/foamfile.m.html">foamfile</a></li>
      

      <li class="mono"><a href="../butterfly/functions.m.html">functions</a></li>
      

      <li class="mono"><a href="../butterfly/fvSchemes.m.html">fvSchemes</a></li>
      

      <li class="mono"><a href="../butterfly/fvSolution.m.html">fvSolution</a></li>
      

      <li class="mono"><a href="../butterfly/g.m.html">g</a></li>
      

      <li class="mono"><a href="../butterfly/geometry.m.html">geometry</a></li>
      

      <li class="mono"><a href="../butterfly/grading.m.html">grading</a></li>
      

      <li class="mono"><a href="../butterfly/k.m.html">k</a></li>
      

      <li class="mono"><a href="../butterfly/make2dparameters.m.html">make2dparameters</a></li>
      

      <li class="mono"><a href="../butterfly/meshingparameters.m.html">meshingparameters</a></li>
      

      <li class="mono"><a href="../butterfly/nut.m.html">nut</a></li>
      

      <li class="mono"><a href="../butterfly/p.m.html">p</a></li>
      

      <li class="mono"><a href="../butterfly/p_rgh.m.html">p_rgh</a></li>
      

      <li class="mono"><a href="../butterfly/parser.m.html">parser</a></li>
      

      <li class="mono"><a href="../butterfly/recipe.m.html">recipe</a></li>
      

      <li class="mono"><a href="../butterfly/refinementRegion.m.html">refinementRegion</a></li>
      

      <li class="mono"><a href="../butterfly/runmanager.m.html">runmanager</a></li>
      

      <li class="mono"><a href="../butterfly/sampleDict.m.html">sampleDict</a></li>
      

      <li class="mono"><a href="../butterfly/snappyHexMeshDict.m.html">snappyHexMeshDict</a></li>
      

      <li class="mono"><a href="">solution</a></li>
      

      <li class="mono"><a href="../butterfly/surfaceFeatureExtractDict.m.html">surfaceFeatureExtractDict</a></li>
      

      <li class="mono"><a href="../butterfly/transportProperties.m.html">transportProperties</a></li>
      

      <li class="mono"><a href="../butterfly/turbulenceProperties.m.html">turbulenceProperties</a></li>
      

      <li class="mono"><a href="../butterfly/utilities.m.html">utilities</a></li>
      

      <li class="mono"><a href="../butterfly/vectormath.m.html">vectormath</a></li>
      

      <li class="mono"><a href="../butterfly/version.m.html">version</a></li>
      

      <li class="mono"><a href="../butterfly/windtunnel.m.html">windtunnel</a></li>
      

      <li class="mono"><a href="../butterfly/z0.m.html">z0</a></li>
      

    </ul>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">butterfly.solution</span> module</h1>
  <p>Butterfly Solution.</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution" class="source">
    <div class="codehilite"><pre><span></span><span class="c1"># coding=utf-8</span>
<span class="sd">&quot;&quot;&quot;Butterfly Solution.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span><span class="p">,</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">.utilities</span> <span class="kn">import</span> <span class="n">tail</span><span class="p">,</span> <span class="n">load_skipped_probes</span>
<span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">CppDictParser</span>


<span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Butterfly Solution.</span>

<span class="sd">    This class creates a solution from a recipe which is ready to run and monitor.</span>

<span class="sd">    Args:</span>
<span class="sd">        case: A butterfly case.</span>
<span class="sd">        recipe: A butterfly recipe.</span>
<span class="sd">        decomposeParDict: decomposeParDict for parallel run (default: None).</span>
<span class="sd">        solution_parameter: A solution_parameter (default: None).</span>
<span class="sd">        remove_extra_foam_files: set to True if you want butterfly to remove all the</span>
<span class="sd">            extra files in 0 folder once you update the recipe (default: False).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">case</span><span class="p">,</span> <span class="n">recipe</span><span class="p">,</span> <span class="n">decomposeParDict</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">solution_parameter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">remove_extra_foam_files</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Init solution.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__remove</span> <span class="o">=</span> <span class="n">remove_extra_foam_files</span>
        <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">case</span><span class="p">,</span> <span class="s1">&#39;isCase&#39;</span><span class="p">),</span> \
            <span class="s1">&#39;ValueError:: {} is not a Butterfly.Case&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">case</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decomposeParDict</span> <span class="o">=</span> <span class="n">decomposeParDict</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__case</span> <span class="o">=</span> <span class="n">case</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">decomposeParDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decomposeParDict</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span> <span class="o">=</span> <span class="n">recipe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_solution_params</span><span class="p">(</span><span class="n">solution_parameter</span><span class="p">)</span>
        <span class="c1"># set internal properties for running the solution</span>

        <span class="c1"># place holder for residuals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_fields</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isRunStarted</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__process</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__log_files</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__errFiles</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">project_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get porject name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">project_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">case</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Case.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">recipe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get recipe.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__recipe</span>

    <span class="nd">@recipe.setter</span>
    <span class="k">def</span> <span class="nf">recipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;set recipe.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">&#39;isRecipe&#39;</span><span class="p">),</span> <span class="s1">&#39;{} is not a recipe.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__recipe</span> <span class="o">=</span> <span class="n">r</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__recipe</span><span class="o">.</span><span class="n">prepare_case</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                   <span class="n">remove</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__remove</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">decomposeParDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;DecomposeParDict.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__decomposeParDict</span>

    <span class="nd">@decomposeParDict.setter</span>
    <span class="k">def</span> <span class="nf">decomposeParDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dpd</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set decomposeParDict.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">dpd</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">dpd</span><span class="p">,</span> <span class="s1">&#39;isDecomposeParDict&#39;</span><span class="p">),</span> \
                <span class="s1">&#39;{} is not a DecomposeParDict.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dpd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__decomposeParDict</span> <span class="o">=</span> <span class="n">dpd</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">remove_extra_foam_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If True, solution will remove extra files everytime recipe changes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__remove</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">project_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get project directory.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">project_dir</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">residual_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of residuals to be watched during the run.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="o">.</span><span class="n">residual_fields</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">controlDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get controlDict.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">controlDict</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">residual_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get residual_control values for this solution.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">fv_solution</span><span class="o">.</span><span class="n">residual_control</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">probes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get probes if any.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">probes</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">residual_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return address of the residual file.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">log_folder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="o">.</span><span class="n">log_file</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">log_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get full path to log files.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__log_files</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the log report.&quot;&quot;&quot;</span>
        <span class="n">isContent</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">runmanager</span><span class="o">.</span><span class="n">check_file_contents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_files</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">err_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get full path to error files.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__errFiles</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_running</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the solution is still running.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isRunStarted</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__process</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">rename_snappy_hex_mesh_folders</span><span class="p">()</span>
            <span class="c1"># load errors if any</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">runmanager</span><span class="o">.</span><span class="n">check_file_contents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_files</span><span class="p">)</span>
            <span class="n">failed</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">runmanager</span><span class="o">.</span><span class="n">check_file_contents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">err_files</span><span class="p">)</span>

            <span class="k">assert</span> <span class="ow">not</span> <span class="n">failed</span><span class="p">,</span> <span class="n">err</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">timestep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get latest timestep for this solution.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_latest_time</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">residual_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">latest_time</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get timestep and residual values as a tuple.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">latest_time</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_info</span><span class="p">()</span><span class="o">.</span><span class="n">residual_values</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get timestep and residual values as a tuple.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_info</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__get_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Info&#39;</span><span class="p">,</span> <span class="s1">&#39;timestep residualValues&#39;</span><span class="p">)</span>
        <span class="c1"># get end of the log file</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_file</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">i</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">tail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_file</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Time =&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># get timestep</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># read residual values</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># quantity, Initial residual, Final residual, No Iterations</span>
                <span class="n">q</span><span class="p">,</span> <span class="n">ir</span><span class="p">,</span> <span class="n">fr</span><span class="p">,</span> <span class="n">ni</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:  Solving for &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="c1"># use final residual</span>
                <span class="k">if</span> <span class="n">q</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span><span class="p">[</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="n">ir</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;= &#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="k">return</span> <span class="n">i</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__get_latest_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># get end of the log file</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_file</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">tail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_file</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Time =&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># get timestep</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">t</span>

    <span class="k">def</span> <span class="nf">update_from_recipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipe</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update solution from recipe inputs.</span>

<span class="sd">        This method creates a SolutionParameter from each recipe property, and</span>
<span class="sd">        uses updateSolutionParams to update the solution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tp</span> <span class="o">=</span> <span class="n">SolutionParameter</span><span class="o">.</span><span class="n">from_cpp_dictionary</span><span class="p">(</span><span class="s1">&#39;turbulence_properties&#39;</span><span class="p">,</span>
                                                   <span class="nb">str</span><span class="p">(</span><span class="n">recipe</span><span class="o">.</span><span class="n">turbulence_properties</span><span class="p">))</span>
        <span class="n">fv_sc</span> <span class="o">=</span> <span class="n">SolutionParameter</span><span class="o">.</span><span class="n">from_cpp_dictionary</span><span class="p">(</span><span class="s1">&#39;fv_schemes&#39;</span><span class="p">,</span>
                                                      <span class="nb">str</span><span class="p">(</span><span class="n">recipe</span><span class="o">.</span><span class="n">fv_schemes</span><span class="p">))</span>
        <span class="n">fv_sol</span> <span class="o">=</span> <span class="n">SolutionParameter</span><span class="o">.</span><span class="n">from_cpp_dictionary</span><span class="p">(</span><span class="s1">&#39;fv_solution&#39;</span><span class="p">,</span>
                                                       <span class="nb">str</span><span class="p">(</span><span class="n">recipe</span><span class="o">.</span><span class="n">fv_solution</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_solution_params</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">fv_sc</span><span class="p">,</span> <span class="n">fv_sol</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">update_solution_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sol_params</span><span class="p">,</span> <span class="n">timestep</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update parameters.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            sol_params: A list of solution parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sol_params</span><span class="p">:</span>
            <span class="c1"># if input is None return</span>
            <span class="k">return</span>
        <span class="c1"># check input with the current and update them if there has been changes</span>
        <span class="k">for</span> <span class="n">solPar</span> <span class="ow">in</span> <span class="n">sol_params</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">solPar</span><span class="p">,</span> <span class="s1">&#39;isSolutionParameter&#39;</span><span class="p">),</span> \
                <span class="s1">&#39;{} is not a solution parameter.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solPar</span><span class="p">)</span>

            <span class="c1"># check if this timestep in range of SolutionParameter time range</span>
            <span class="k">if</span> <span class="n">timestep</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">solPar</span><span class="o">.</span><span class="n">is_time_in_range</span><span class="p">(</span><span class="n">timestep</span><span class="p">):</span>
                <span class="c1"># not in time range! try the next one</span>
                <span class="k">continue</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">update</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="p">,</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span> \
                    <span class="o">.</span><span class="n">update_values</span><span class="p">(</span><span class="n">solPar</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">solPar</span><span class="o">.</span><span class="n">replace</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># probes can be empty at start</span>
                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

            <span class="c1"># check to remove functions if needed</span>
            <span class="k">if</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;controlDict&#39;</span><span class="p">:</span>
                <span class="n">cur_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="n">new_func</span> <span class="o">=</span> <span class="n">solPar</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cur_func</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_func</span><span class="p">:</span>
                        <span class="k">del</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">][</span><span class="n">k</span><span class="p">])</span>
                        <span class="n">update</span> <span class="o">=</span> <span class="bp">True</span>

            <span class="k">if</span> <span class="n">update</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Updating {}...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solPar</span><span class="o">.</span><span class="n">filename</span><span class="p">))</span>
                <span class="n">ffile</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="p">,</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
                <span class="n">ffile</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_dir</span><span class="p">)</span>

                <span class="c1"># just in case probes was not there and now should be included</span>
                <span class="c1"># in controlDict</span>
                <span class="k">if</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;probes&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">include</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">include</span> <span class="o">=</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_dir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the solution.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">rename_snappy_hex_mesh_folders</span><span class="p">()</span>
        <span class="n">log</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">command</span><span class="p">(</span>
            <span class="n">cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="o">.</span><span class="n">application</span><span class="p">,</span>
            <span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">decomposeParDict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__decomposeParDict</span><span class="p">,</span>
            <span class="n">run</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="n">wait</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__process</span> <span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__errFiles</span> <span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">errorfiles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__log_files</span> <span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">logfiles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isRunStarted</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">wait</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">purge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remove_poly_mesh_content</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">remove_snappy_hex_mesh_folders</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">remove_result_folders</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">remove_post_processing_folder</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Purge solution&#39;s case folder.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">purge</span><span class="p">(</span>
            <span class="n">remove_poly_mesh_content</span><span class="p">,</span> <span class="n">remove_snappy_hex_mesh_folders</span><span class="p">,</span>
            <span class="n">remove_result_folders</span><span class="p">,</span> <span class="n">remove_post_processing_folder</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cancel the solution.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">runmanager</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">decomposeParDict</span><span class="p">:</span>
            <span class="c1"># remove processor folders if they haven&#39;t been removed already.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">remove_processor_folders</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">load_probe_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return OpenFOAM probes results for a given field (e.g. U).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">load_probe_values</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load_probes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return OpenFOAM probes location for a given field (e.g. U).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">load_probes</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">skipped_probes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of probes that are skipped from the solution.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">load_skipped_probes</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">log_folder</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="o">.</span><span class="n">log_file</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sample the results for a certain field.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: A unique name for this sample.</span>
<span class="sd">            points: List of points as (x, y, z).</span>
<span class="sd">            fields: List of fields (e.g. U, p).</span>
<span class="sd">            args: Command arguments.</span>
<span class="sd">            wait: Wait until command execution ends.</span>
<span class="sd">        Returns:</span>
<span class="sd">            namedtuple(probes, values).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">duplicate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a copy of this object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ToString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Overwrite .NET ToString method.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Solution representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;{}::{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SolutionParameter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A solution parameter that can be changed during the solution.</span>

<span class="sd">    Add solution parameter to to solution settings.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        filename: OpenFOAM filename that the values are belong to (e.g.</span>
<span class="sd">            blockMeshDict, fv_schemes).</span>
<span class="sd">        values: New values as a python dictionary.</span>
<span class="sd">        replace: Set to True if you want the original dictionary to be replaced</span>
<span class="sd">            by new values. Default is False which means the original dictionary</span>
<span class="sd">            will be only updated by new values.</span>
<span class="sd">        time_range: Time range that this SolutioParameter is valid as a tuple</span>
<span class="sd">            (default: (0, 1.0e+100)).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_of_filenames</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;epsilon&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="s1">&#39;nut&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;turbulence_properties&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;transport_properties&#39;</span><span class="p">,</span> <span class="s1">&#39;blockMeshDict&#39;</span><span class="p">,</span> <span class="s1">&#39;controlDict&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;fv_schemes&#39;</span><span class="p">,</span> <span class="s1">&#39;fv_solution&#39;</span><span class="p">,</span> <span class="s1">&#39;snappyHexMeshDict&#39;</span><span class="p">,</span> <span class="s1">&#39;probes&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">of_filename</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">time_range</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create solution parameter.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">of_filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="n">values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replace</span> <span class="o">=</span> <span class="n">replace</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time_range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0e+100</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0e+100</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dictionary_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">of_filename</span><span class="p">,</span> <span class="n">filepath</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                             <span class="n">time_range</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create from an OpenFOAM dictionary file.&quot;&quot;&quot;</span>
        <span class="c1"># convert values to python dictionary</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">CppDictParser</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">of_filename</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">replace</span><span class="p">,</span> <span class="n">time_range</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_cpp_dictionary</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">of_filename</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                            <span class="n">time_range</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create from an OpenFOAM dictionary in text format.&quot;&quot;&quot;</span>
        <span class="c1"># convert values to python dictionary</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">CppDictParser</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">dictionary</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">header</span> <span class="ow">and</span> <span class="s1">&#39;FoamFile&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;FoamFile&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">of_filename</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">replace</span><span class="p">,</span> <span class="n">time_range</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_solution_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return True.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return OpenFOAM file name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__values</span>

    <span class="nd">@values.setter</span>
    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span> <span class="s1">&#39;values should be a dictionary not a {}.&#39;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__values</span> <span class="o">=</span> <span class="n">v</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return OpenFOAM file name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__filename</span>

    <span class="nd">@filename.setter</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_of_filenames</span><span class="p">,</span> <span class="s1">&#39;{} is not a valid OpenFOAM dictionary &#39;</span> \
            <span class="s1">&#39;file. Try one of the files below:</span><span class="se">\n</span><span class="s1">{}.&#39;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_of_filenames</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__filename</span> <span class="o">=</span> <span class="n">f</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time_range</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get time range.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__t0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_time_in_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if time is in this SolutionParameter time range.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span> <span class="o">&lt;=</span> <span class="nb">float</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span>

    <span class="k">def</span> <span class="nf">duplicate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a copy of this object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ToString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Overwrite .NET ToString method.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class representation.&quot;&quot;&quot;</span>
        <span class="n">kv</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;{}: {};&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">iteritems</span><span class="p">())</span>
        <span class="k">return</span> <span class="s1">&#39;SolutionParameter::{}</span><span class="se">\n</span><span class="s1">{}</span><span class="se">\n</span><span class="s1">@{}&#39;</span>\
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">kv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_range</span><span class="p">)</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="butterfly.solution.Solution" class="name">class <span class="ident">Solution</span></p>
      
  
    <div class="desc"><p>Butterfly Solution.</p>
<p>This class creates a solution from a recipe which is ready to run and monitor.</p>
<p>Args:
    case: A butterfly case.
    recipe: A butterfly recipe.
    decomposeParDict: decomposeParDict for parallel run (default: None).
    solution_parameter: A solution_parameter (default: None).
    remove_extra_foam_files: set to True if you want butterfly to remove all the
        extra files in 0 folder once you update the recipe (default: False).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Butterfly Solution.</span>

<span class="sd">    This class creates a solution from a recipe which is ready to run and monitor.</span>

<span class="sd">    Args:</span>
<span class="sd">        case: A butterfly case.</span>
<span class="sd">        recipe: A butterfly recipe.</span>
<span class="sd">        decomposeParDict: decomposeParDict for parallel run (default: None).</span>
<span class="sd">        solution_parameter: A solution_parameter (default: None).</span>
<span class="sd">        remove_extra_foam_files: set to True if you want butterfly to remove all the</span>
<span class="sd">            extra files in 0 folder once you update the recipe (default: False).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">case</span><span class="p">,</span> <span class="n">recipe</span><span class="p">,</span> <span class="n">decomposeParDict</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">solution_parameter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">remove_extra_foam_files</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Init solution.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__remove</span> <span class="o">=</span> <span class="n">remove_extra_foam_files</span>
        <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">case</span><span class="p">,</span> <span class="s1">&#39;isCase&#39;</span><span class="p">),</span> \
            <span class="s1">&#39;ValueError:: {} is not a Butterfly.Case&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">case</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decomposeParDict</span> <span class="o">=</span> <span class="n">decomposeParDict</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__case</span> <span class="o">=</span> <span class="n">case</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">decomposeParDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decomposeParDict</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span> <span class="o">=</span> <span class="n">recipe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_solution_params</span><span class="p">(</span><span class="n">solution_parameter</span><span class="p">)</span>
        <span class="c1"># set internal properties for running the solution</span>

        <span class="c1"># place holder for residuals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_fields</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isRunStarted</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__process</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__log_files</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__errFiles</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">project_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get porject name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">project_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">case</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Case.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">recipe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get recipe.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__recipe</span>

    <span class="nd">@recipe.setter</span>
    <span class="k">def</span> <span class="nf">recipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;set recipe.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">&#39;isRecipe&#39;</span><span class="p">),</span> <span class="s1">&#39;{} is not a recipe.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__recipe</span> <span class="o">=</span> <span class="n">r</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__recipe</span><span class="o">.</span><span class="n">prepare_case</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                   <span class="n">remove</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__remove</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">decomposeParDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;DecomposeParDict.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__decomposeParDict</span>

    <span class="nd">@decomposeParDict.setter</span>
    <span class="k">def</span> <span class="nf">decomposeParDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dpd</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set decomposeParDict.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">dpd</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">dpd</span><span class="p">,</span> <span class="s1">&#39;isDecomposeParDict&#39;</span><span class="p">),</span> \
                <span class="s1">&#39;{} is not a DecomposeParDict.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dpd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__decomposeParDict</span> <span class="o">=</span> <span class="n">dpd</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">remove_extra_foam_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If True, solution will remove extra files everytime recipe changes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__remove</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">project_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get project directory.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">project_dir</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">residual_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of residuals to be watched during the run.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="o">.</span><span class="n">residual_fields</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">controlDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get controlDict.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">controlDict</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">residual_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get residual_control values for this solution.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">fv_solution</span><span class="o">.</span><span class="n">residual_control</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">probes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get probes if any.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">probes</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">residual_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return address of the residual file.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">log_folder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="o">.</span><span class="n">log_file</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">log_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get full path to log files.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__log_files</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the log report.&quot;&quot;&quot;</span>
        <span class="n">isContent</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">runmanager</span><span class="o">.</span><span class="n">check_file_contents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_files</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">err_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get full path to error files.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__errFiles</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_running</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the solution is still running.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isRunStarted</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__process</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">rename_snappy_hex_mesh_folders</span><span class="p">()</span>
            <span class="c1"># load errors if any</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">runmanager</span><span class="o">.</span><span class="n">check_file_contents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_files</span><span class="p">)</span>
            <span class="n">failed</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">runmanager</span><span class="o">.</span><span class="n">check_file_contents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">err_files</span><span class="p">)</span>

            <span class="k">assert</span> <span class="ow">not</span> <span class="n">failed</span><span class="p">,</span> <span class="n">err</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">timestep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get latest timestep for this solution.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_latest_time</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">residual_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">latest_time</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get timestep and residual values as a tuple.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">latest_time</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_info</span><span class="p">()</span><span class="o">.</span><span class="n">residual_values</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get timestep and residual values as a tuple.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_info</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__get_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Info&#39;</span><span class="p">,</span> <span class="s1">&#39;timestep residualValues&#39;</span><span class="p">)</span>
        <span class="c1"># get end of the log file</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_file</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">i</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">tail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_file</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Time =&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># get timestep</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># read residual values</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># quantity, Initial residual, Final residual, No Iterations</span>
                <span class="n">q</span><span class="p">,</span> <span class="n">ir</span><span class="p">,</span> <span class="n">fr</span><span class="p">,</span> <span class="n">ni</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:  Solving for &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="c1"># use final residual</span>
                <span class="k">if</span> <span class="n">q</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span><span class="p">[</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="n">ir</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;= &#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="k">return</span> <span class="n">i</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__get_latest_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># get end of the log file</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_file</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">tail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_file</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Time =&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># get timestep</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">t</span>

    <span class="k">def</span> <span class="nf">update_from_recipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipe</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update solution from recipe inputs.</span>

<span class="sd">        This method creates a SolutionParameter from each recipe property, and</span>
<span class="sd">        uses updateSolutionParams to update the solution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tp</span> <span class="o">=</span> <span class="n">SolutionParameter</span><span class="o">.</span><span class="n">from_cpp_dictionary</span><span class="p">(</span><span class="s1">&#39;turbulence_properties&#39;</span><span class="p">,</span>
                                                   <span class="nb">str</span><span class="p">(</span><span class="n">recipe</span><span class="o">.</span><span class="n">turbulence_properties</span><span class="p">))</span>
        <span class="n">fv_sc</span> <span class="o">=</span> <span class="n">SolutionParameter</span><span class="o">.</span><span class="n">from_cpp_dictionary</span><span class="p">(</span><span class="s1">&#39;fv_schemes&#39;</span><span class="p">,</span>
                                                      <span class="nb">str</span><span class="p">(</span><span class="n">recipe</span><span class="o">.</span><span class="n">fv_schemes</span><span class="p">))</span>
        <span class="n">fv_sol</span> <span class="o">=</span> <span class="n">SolutionParameter</span><span class="o">.</span><span class="n">from_cpp_dictionary</span><span class="p">(</span><span class="s1">&#39;fv_solution&#39;</span><span class="p">,</span>
                                                       <span class="nb">str</span><span class="p">(</span><span class="n">recipe</span><span class="o">.</span><span class="n">fv_solution</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_solution_params</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">fv_sc</span><span class="p">,</span> <span class="n">fv_sol</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">update_solution_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sol_params</span><span class="p">,</span> <span class="n">timestep</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update parameters.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            sol_params: A list of solution parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sol_params</span><span class="p">:</span>
            <span class="c1"># if input is None return</span>
            <span class="k">return</span>
        <span class="c1"># check input with the current and update them if there has been changes</span>
        <span class="k">for</span> <span class="n">solPar</span> <span class="ow">in</span> <span class="n">sol_params</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">solPar</span><span class="p">,</span> <span class="s1">&#39;isSolutionParameter&#39;</span><span class="p">),</span> \
                <span class="s1">&#39;{} is not a solution parameter.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solPar</span><span class="p">)</span>

            <span class="c1"># check if this timestep in range of SolutionParameter time range</span>
            <span class="k">if</span> <span class="n">timestep</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">solPar</span><span class="o">.</span><span class="n">is_time_in_range</span><span class="p">(</span><span class="n">timestep</span><span class="p">):</span>
                <span class="c1"># not in time range! try the next one</span>
                <span class="k">continue</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">update</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="p">,</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span> \
                    <span class="o">.</span><span class="n">update_values</span><span class="p">(</span><span class="n">solPar</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">solPar</span><span class="o">.</span><span class="n">replace</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># probes can be empty at start</span>
                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

            <span class="c1"># check to remove functions if needed</span>
            <span class="k">if</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;controlDict&#39;</span><span class="p">:</span>
                <span class="n">cur_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="n">new_func</span> <span class="o">=</span> <span class="n">solPar</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cur_func</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_func</span><span class="p">:</span>
                        <span class="k">del</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">][</span><span class="n">k</span><span class="p">])</span>
                        <span class="n">update</span> <span class="o">=</span> <span class="bp">True</span>

            <span class="k">if</span> <span class="n">update</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Updating {}...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solPar</span><span class="o">.</span><span class="n">filename</span><span class="p">))</span>
                <span class="n">ffile</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="p">,</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
                <span class="n">ffile</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_dir</span><span class="p">)</span>

                <span class="c1"># just in case probes was not there and now should be included</span>
                <span class="c1"># in controlDict</span>
                <span class="k">if</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;probes&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">include</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">include</span> <span class="o">=</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_dir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the solution.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">rename_snappy_hex_mesh_folders</span><span class="p">()</span>
        <span class="n">log</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">command</span><span class="p">(</span>
            <span class="n">cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="o">.</span><span class="n">application</span><span class="p">,</span>
            <span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">decomposeParDict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__decomposeParDict</span><span class="p">,</span>
            <span class="n">run</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="n">wait</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__process</span> <span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__errFiles</span> <span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">errorfiles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__log_files</span> <span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">logfiles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isRunStarted</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">wait</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">purge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remove_poly_mesh_content</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">remove_snappy_hex_mesh_folders</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">remove_result_folders</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">remove_post_processing_folder</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Purge solution&#39;s case folder.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">purge</span><span class="p">(</span>
            <span class="n">remove_poly_mesh_content</span><span class="p">,</span> <span class="n">remove_snappy_hex_mesh_folders</span><span class="p">,</span>
            <span class="n">remove_result_folders</span><span class="p">,</span> <span class="n">remove_post_processing_folder</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cancel the solution.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">runmanager</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">decomposeParDict</span><span class="p">:</span>
            <span class="c1"># remove processor folders if they haven&#39;t been removed already.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">remove_processor_folders</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">load_probe_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return OpenFOAM probes results for a given field (e.g. U).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">load_probe_values</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load_probes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return OpenFOAM probes location for a given field (e.g. U).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">load_probes</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">skipped_probes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of probes that are skipped from the solution.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">load_skipped_probes</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">log_folder</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="o">.</span><span class="n">log_file</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sample the results for a certain field.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: A unique name for this sample.</span>
<span class="sd">            points: List of points as (x, y, z).</span>
<span class="sd">            fields: List of fields (e.g. U, p).</span>
<span class="sd">            args: Command arguments.</span>
<span class="sd">            wait: Wait until command execution ends.</span>
<span class="sd">        Returns:</span>
<span class="sd">            namedtuple(probes, values).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">duplicate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a copy of this object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ToString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Overwrite .NET ToString method.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Solution representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;{}::{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#butterfly.solution.Solution">Solution</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="butterfly.solution.Solution.case" class="name">var <span class="ident">case</span></p>
            

            
  
    <div class="desc"><p>Case.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.controlDict" class="name">var <span class="ident">controlDict</span></p>
            

            
  
    <div class="desc"><p>Get controlDict.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.decomposeParDict" class="name">var <span class="ident">decomposeParDict</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.err_files" class="name">var <span class="ident">err_files</span></p>
            

            
  
    <div class="desc"><p>Get full path to error files.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.info" class="name">var <span class="ident">info</span></p>
            

            
  
    <div class="desc"><p>Get timestep and residual values as a tuple.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.is_running" class="name">var <span class="ident">is_running</span></p>
            

            
  
    <div class="desc"><p>Check if the solution is still running.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.log" class="name">var <span class="ident">log</span></p>
            

            
  
    <div class="desc"><p>Get the log report.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.log_files" class="name">var <span class="ident">log_files</span></p>
            

            
  
    <div class="desc"><p>Get full path to log files.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.probes" class="name">var <span class="ident">probes</span></p>
            

            
  
    <div class="desc"><p>Get probes if any.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.project_dir" class="name">var <span class="ident">project_dir</span></p>
            

            
  
    <div class="desc"><p>Get project directory.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.project_name" class="name">var <span class="ident">project_name</span></p>
            

            
  
    <div class="desc"><p>Get porject name.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.recipe" class="name">var <span class="ident">recipe</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.remove_extra_foam_files" class="name">var <span class="ident">remove_extra_foam_files</span></p>
            

            
  
    <div class="desc"><p>If True, solution will remove extra files everytime recipe changes.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.residual_control" class="name">var <span class="ident">residual_control</span></p>
            

            
  
    <div class="desc"><p>Get residual_control values for this solution.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.residual_fields" class="name">var <span class="ident">residual_fields</span></p>
            

            
  
    <div class="desc"><p>Get list of residuals to be watched during the run.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.residual_file" class="name">var <span class="ident">residual_file</span></p>
            

            
  
    <div class="desc"><p>Return address of the residual file.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.residual_values" class="name">var <span class="ident">residual_values</span></p>
            

            
  
    <div class="desc"><p>Get timestep and residual values as a tuple.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.Solution.timestep" class="name">var <span class="ident">timestep</span></p>
            

            
  
    <div class="desc"><p>Get latest timestep for this solution.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, case, recipe, decomposeParDict=None, solution_parameter=None, remove_extra_foam_files=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Init solution.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.__init__', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">case</span><span class="p">,</span> <span class="n">recipe</span><span class="p">,</span> <span class="n">decomposeParDict</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">solution_parameter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">remove_extra_foam_files</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Init solution.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__remove</span> <span class="o">=</span> <span class="n">remove_extra_foam_files</span>
    <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">case</span><span class="p">,</span> <span class="s1">&#39;isCase&#39;</span><span class="p">),</span> \
        <span class="s1">&#39;ValueError:: {} is not a Butterfly.Case&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">case</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decomposeParDict</span> <span class="o">=</span> <span class="n">decomposeParDict</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__case</span> <span class="o">=</span> <span class="n">case</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">decomposeParDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decomposeParDict</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span> <span class="o">=</span> <span class="n">recipe</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_solution_params</span><span class="p">(</span><span class="n">solution_parameter</span><span class="p">)</span>
    <span class="c1"># set internal properties for running the solution</span>
    <span class="c1"># place holder for residuals</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__residualValues</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_fields</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__isRunStarted</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__process</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__log_files</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__errFiles</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.ToString">
    <p>def <span class="ident">ToString</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Overwrite .NET ToString method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.ToString', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.ToString" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">ToString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Overwrite .NET ToString method.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.duplicate">
    <p>def <span class="ident">duplicate</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a copy of this object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.duplicate', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.duplicate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">duplicate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a copy of this object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.load_probe_values">
    <p>def <span class="ident">load_probe_values</span>(</p><p>self, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Return OpenFOAM probes results for a given field (e.g. U).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.load_probe_values', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.load_probe_values" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">load_probe_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return OpenFOAM probes results for a given field (e.g. U).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">load_probe_values</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.load_probes">
    <p>def <span class="ident">load_probes</span>(</p><p>self, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Return OpenFOAM probes location for a given field (e.g. U).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.load_probes', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.load_probes" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">load_probes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return OpenFOAM probes location for a given field (e.g. U).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">load_probes</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.purge">
    <p>def <span class="ident">purge</span>(</p><p>self, remove_poly_mesh_content=True, remove_snappy_hex_mesh_folders=True, remove_result_folders=False, remove_post_processing_folder=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Purge solution's case folder.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.purge', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.purge" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">purge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remove_poly_mesh_content</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
          <span class="n">remove_snappy_hex_mesh_folders</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
          <span class="n">remove_result_folders</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
          <span class="n">remove_post_processing_folder</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Purge solution&#39;s case folder.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">purge</span><span class="p">(</span>
        <span class="n">remove_poly_mesh_content</span><span class="p">,</span> <span class="n">remove_snappy_hex_mesh_folders</span><span class="p">,</span>
        <span class="n">remove_result_folders</span><span class="p">,</span> <span class="n">remove_post_processing_folder</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.run">
    <p>def <span class="ident">run</span>(</p><p>self, wait=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Execute the solution.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.run', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.run" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Execute the solution.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">rename_snappy_hex_mesh_folders</span><span class="p">()</span>
    <span class="n">log</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">command</span><span class="p">(</span>
        <span class="n">cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="o">.</span><span class="n">application</span><span class="p">,</span>
        <span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">decomposeParDict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__decomposeParDict</span><span class="p">,</span>
        <span class="n">run</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="n">wait</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__process</span> <span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">process</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__errFiles</span> <span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">errorfiles</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__log_files</span> <span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">logfiles</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__isRunStarted</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">wait</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isRunFinished</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.sample">
    <p>def <span class="ident">sample</span>(</p><p>self, name, points, field, wait=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Sample the results for a certain field.</p>
<p>Args:
    name: A unique name for this sample.
    points: List of points as (x, y, z).
    fields: List of fields (e.g. U, p).
    args: Command arguments.
    wait: Wait until command execution ends.
Returns:
    namedtuple(probes, values).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.sample', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.sample" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sample the results for a certain field.</span>
<span class="sd">    Args:</span>
<span class="sd">        name: A unique name for this sample.</span>
<span class="sd">        points: List of points as (x, y, z).</span>
<span class="sd">        fields: List of fields (e.g. U, p).</span>
<span class="sd">        args: Command arguments.</span>
<span class="sd">        wait: Wait until command execution ends.</span>
<span class="sd">    Returns:</span>
<span class="sd">        namedtuple(probes, values).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.skipped_probes">
    <p>def <span class="ident">skipped_probes</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get list of probes that are skipped from the solution.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.skipped_probes', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.skipped_probes" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">skipped_probes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get list of probes that are skipped from the solution.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">load_skipped_probes</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">log_folder</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="o">.</span><span class="n">log_file</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.terminate">
    <p>def <span class="ident">terminate</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Cancel the solution.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.terminate', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.terminate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Cancel the solution.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">runmanager</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">decomposeParDict</span><span class="p">:</span>
        <span class="c1"># remove processor folders if they haven&#39;t been removed already.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">remove_processor_folders</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.update_from_recipe">
    <p>def <span class="ident">update_from_recipe</span>(</p><p>self, recipe)</p>
    </div>
    

    
  
    <div class="desc"><p>Update solution from recipe inputs.</p>
<p>This method creates a SolutionParameter from each recipe property, and
uses updateSolutionParams to update the solution.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.update_from_recipe', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.update_from_recipe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_from_recipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipe</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Update solution from recipe inputs.</span>
<span class="sd">    This method creates a SolutionParameter from each recipe property, and</span>
<span class="sd">    uses updateSolutionParams to update the solution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tp</span> <span class="o">=</span> <span class="n">SolutionParameter</span><span class="o">.</span><span class="n">from_cpp_dictionary</span><span class="p">(</span><span class="s1">&#39;turbulence_properties&#39;</span><span class="p">,</span>
                                               <span class="nb">str</span><span class="p">(</span><span class="n">recipe</span><span class="o">.</span><span class="n">turbulence_properties</span><span class="p">))</span>
    <span class="n">fv_sc</span> <span class="o">=</span> <span class="n">SolutionParameter</span><span class="o">.</span><span class="n">from_cpp_dictionary</span><span class="p">(</span><span class="s1">&#39;fv_schemes&#39;</span><span class="p">,</span>
                                                  <span class="nb">str</span><span class="p">(</span><span class="n">recipe</span><span class="o">.</span><span class="n">fv_schemes</span><span class="p">))</span>
    <span class="n">fv_sol</span> <span class="o">=</span> <span class="n">SolutionParameter</span><span class="o">.</span><span class="n">from_cpp_dictionary</span><span class="p">(</span><span class="s1">&#39;fv_solution&#39;</span><span class="p">,</span>
                                                   <span class="nb">str</span><span class="p">(</span><span class="n">recipe</span><span class="o">.</span><span class="n">fv_solution</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_solution_params</span><span class="p">((</span><span class="n">tp</span><span class="p">,</span> <span class="n">fv_sc</span><span class="p">,</span> <span class="n">fv_sol</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.Solution.update_solution_params">
    <p>def <span class="ident">update_solution_params</span>(</p><p>self, sol_params, timestep=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update parameters.</p>
<p>Attributes:
    sol_params: A list of solution parameters.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.Solution.update_solution_params', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.Solution.update_solution_params" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_solution_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sol_params</span><span class="p">,</span> <span class="n">timestep</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Update parameters.</span>
<span class="sd">    Attributes:</span>
<span class="sd">        sol_params: A list of solution parameters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">sol_params</span><span class="p">:</span>
        <span class="c1"># if input is None return</span>
        <span class="k">return</span>
    <span class="c1"># check input with the current and update them if there has been changes</span>
    <span class="k">for</span> <span class="n">solPar</span> <span class="ow">in</span> <span class="n">sol_params</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">solPar</span><span class="p">,</span> <span class="s1">&#39;isSolutionParameter&#39;</span><span class="p">),</span> \
            <span class="s1">&#39;{} is not a solution parameter.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solPar</span><span class="p">)</span>
        <span class="c1"># check if this timestep in range of SolutionParameter time range</span>
        <span class="k">if</span> <span class="n">timestep</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">solPar</span><span class="o">.</span><span class="n">is_time_in_range</span><span class="p">(</span><span class="n">timestep</span><span class="p">):</span>
            <span class="c1"># not in time range! try the next one</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">update</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="p">,</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span> \
                <span class="o">.</span><span class="n">update_values</span><span class="p">(</span><span class="n">solPar</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">solPar</span><span class="o">.</span><span class="n">replace</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># probes can be empty at start</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="c1"># check to remove functions if needed</span>
        <span class="k">if</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;controlDict&#39;</span><span class="p">:</span>
            <span class="n">cur_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="n">new_func</span> <span class="o">=</span> <span class="n">solPar</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cur_func</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_func</span><span class="p">:</span>
                    <span class="k">del</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;functions&#39;</span><span class="p">][</span><span class="n">k</span><span class="p">])</span>
                    <span class="n">update</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">update</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Updating {}...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solPar</span><span class="o">.</span><span class="n">filename</span><span class="p">))</span>
            <span class="n">ffile</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__case</span><span class="p">,</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">ffile</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_dir</span><span class="p">)</span>
            <span class="c1"># just in case probes was not there and now should be included</span>
            <span class="c1"># in controlDict</span>
            <span class="k">if</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;probes&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">include</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">include</span> <span class="o">=</span> <span class="n">solPar</span><span class="o">.</span><span class="n">filename</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_dir</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="butterfly.solution.SolutionParameter" class="name">class <span class="ident">SolutionParameter</span></p>
      
  
    <div class="desc"><p>A solution parameter that can be changed during the solution.</p>
<p>Add solution parameter to to solution settings.</p>
<p>Attributes:
    filename: OpenFOAM filename that the values are belong to (e.g.
        blockMeshDict, fv_schemes).
    values: New values as a python dictionary.
    replace: Set to True if you want the original dictionary to be replaced
        by new values. Default is False which means the original dictionary
        will be only updated by new values.
    time_range: Time range that this SolutioParameter is valid as a tuple
        (default: (0, 1.0e+100)).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.SolutionParameter', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.SolutionParameter" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SolutionParameter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A solution parameter that can be changed during the solution.</span>

<span class="sd">    Add solution parameter to to solution settings.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        filename: OpenFOAM filename that the values are belong to (e.g.</span>
<span class="sd">            blockMeshDict, fv_schemes).</span>
<span class="sd">        values: New values as a python dictionary.</span>
<span class="sd">        replace: Set to True if you want the original dictionary to be replaced</span>
<span class="sd">            by new values. Default is False which means the original dictionary</span>
<span class="sd">            will be only updated by new values.</span>
<span class="sd">        time_range: Time range that this SolutioParameter is valid as a tuple</span>
<span class="sd">            (default: (0, 1.0e+100)).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_of_filenames</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;epsilon&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="s1">&#39;nut&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;turbulence_properties&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;transport_properties&#39;</span><span class="p">,</span> <span class="s1">&#39;blockMeshDict&#39;</span><span class="p">,</span> <span class="s1">&#39;controlDict&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;fv_schemes&#39;</span><span class="p">,</span> <span class="s1">&#39;fv_solution&#39;</span><span class="p">,</span> <span class="s1">&#39;snappyHexMeshDict&#39;</span><span class="p">,</span> <span class="s1">&#39;probes&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">of_filename</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">time_range</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create solution parameter.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">of_filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="n">values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replace</span> <span class="o">=</span> <span class="n">replace</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time_range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0e+100</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0e+100</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dictionary_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">of_filename</span><span class="p">,</span> <span class="n">filepath</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                             <span class="n">time_range</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create from an OpenFOAM dictionary file.&quot;&quot;&quot;</span>
        <span class="c1"># convert values to python dictionary</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">CppDictParser</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">of_filename</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">replace</span><span class="p">,</span> <span class="n">time_range</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_cpp_dictionary</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">of_filename</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                            <span class="n">time_range</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create from an OpenFOAM dictionary in text format.&quot;&quot;&quot;</span>
        <span class="c1"># convert values to python dictionary</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">CppDictParser</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">dictionary</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">header</span> <span class="ow">and</span> <span class="s1">&#39;FoamFile&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;FoamFile&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">of_filename</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">replace</span><span class="p">,</span> <span class="n">time_range</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_solution_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return True.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return OpenFOAM file name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__values</span>

    <span class="nd">@values.setter</span>
    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span> <span class="s1">&#39;values should be a dictionary not a {}.&#39;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__values</span> <span class="o">=</span> <span class="n">v</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return OpenFOAM file name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__filename</span>

    <span class="nd">@filename.setter</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_of_filenames</span><span class="p">,</span> <span class="s1">&#39;{} is not a valid OpenFOAM dictionary &#39;</span> \
            <span class="s1">&#39;file. Try one of the files below:</span><span class="se">\n</span><span class="s1">{}.&#39;</span> \
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_of_filenames</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__filename</span> <span class="o">=</span> <span class="n">f</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time_range</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get time range.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__t0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_time_in_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if time is in this SolutionParameter time range.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span> <span class="o">&lt;=</span> <span class="nb">float</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span>

    <span class="k">def</span> <span class="nf">duplicate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a copy of this object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ToString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Overwrite .NET ToString method.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class representation.&quot;&quot;&quot;</span>
        <span class="n">kv</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;{}: {};&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">iteritems</span><span class="p">())</span>
        <span class="k">return</span> <span class="s1">&#39;SolutionParameter::{}</span><span class="se">\n</span><span class="s1">{}</span><span class="se">\n</span><span class="s1">@{}&#39;</span>\
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">kv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_range</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#butterfly.solution.SolutionParameter">SolutionParameter</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="butterfly.solution.SolutionParameter.filename" class="name">var <span class="ident">filename</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.SolutionParameter.is_solution_parameter" class="name">var <span class="ident">is_solution_parameter</span></p>
            

            
  
    <div class="desc"><p>Return True.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.SolutionParameter.replace" class="name">var <span class="ident">replace</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.SolutionParameter.time_range" class="name">var <span class="ident">time_range</span></p>
            

            
  
    <div class="desc"><p>Get time range.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="butterfly.solution.SolutionParameter.values" class="name">var <span class="ident">values</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="butterfly.solution.SolutionParameter.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, of_filename, values, replace=False, time_range=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create solution parameter.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.SolutionParameter.__init__', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.SolutionParameter.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">of_filename</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">time_range</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create solution parameter.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">of_filename</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="n">values</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">replace</span> <span class="o">=</span> <span class="n">replace</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time_range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0e+100</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0e+100</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.SolutionParameter.ToString">
    <p>def <span class="ident">ToString</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Overwrite .NET ToString method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.SolutionParameter.ToString', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.SolutionParameter.ToString" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">ToString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Overwrite .NET ToString method.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.SolutionParameter.duplicate">
    <p>def <span class="ident">duplicate</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a copy of this object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.SolutionParameter.duplicate', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.SolutionParameter.duplicate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">duplicate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a copy of this object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.SolutionParameter.from_cpp_dictionary">
    <p>def <span class="ident">from_cpp_dictionary</span>(</p><p>cls, of_filename, dictionary, replace=False, time_range=None, header=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Create from an OpenFOAM dictionary in text format.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.SolutionParameter.from_cpp_dictionary', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.SolutionParameter.from_cpp_dictionary" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_cpp_dictionary</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">of_filename</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                        <span class="n">time_range</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create from an OpenFOAM dictionary in text format.&quot;&quot;&quot;</span>
    <span class="c1"># convert values to python dictionary</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">CppDictParser</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">dictionary</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">header</span> <span class="ow">and</span> <span class="s1">&#39;FoamFile&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">del</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;FoamFile&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">of_filename</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">replace</span><span class="p">,</span> <span class="n">time_range</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.SolutionParameter.from_dictionary_file">
    <p>def <span class="ident">from_dictionary_file</span>(</p><p>cls, of_filename, filepath, replace=False, time_range=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create from an OpenFOAM dictionary file.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.SolutionParameter.from_dictionary_file', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.SolutionParameter.from_dictionary_file" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dictionary_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">of_filename</span><span class="p">,</span> <span class="n">filepath</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                         <span class="n">time_range</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create from an OpenFOAM dictionary file.&quot;&quot;&quot;</span>
    <span class="c1"># convert values to python dictionary</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">CppDictParser</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">of_filename</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">replace</span><span class="p">,</span> <span class="n">time_range</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="butterfly.solution.SolutionParameter.is_time_in_range">
    <p>def <span class="ident">is_time_in_range</span>(</p><p>self, time)</p>
    </div>
    

    
  
    <div class="desc"><p>Check if time is in this SolutionParameter time range.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-butterfly.solution.SolutionParameter.is_time_in_range', this);">Show source &equiv;</a></p>
  <div id="source-butterfly.solution.SolutionParameter.is_time_in_range" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_time_in_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if time is in this SolutionParameter time range.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t0</span> <span class="o">&lt;=</span> <span class="nb">float</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">__t1</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>
  </footer>
</div>
</body>
</html>